#ifndef ENGINE_H
#define ENGINE_H

#include <iostream>
#include <string>

#include <glew\GL\glew.h>
#include <SFML\Graphics.hpp>
#include <SFML\OpenGL.hpp>
#include <glm\glm.hpp>
#include <glm\gtc\type_ptr.hpp>

#include "core\assets.h"
#include "core\eventSystem.h"
#include "core\sceneManager.h"
#include "core\objectManager.h"
#include "rendering\renderSystem.h"

#include "core\input.h"
#include "rendering\camera.h"
#include "rendering\modelRenderer.h"


class Engine
{
public:
	Engine(){};
	~Engine(){};

	sf::RenderWindow* startEditorMode(HWND windowHandle);
	sf::RenderWindow* startGameMode();
	
	void startup(); //!< Initalize everything needed to run the engine
	void processEvent(sf::Event e); //!< Handle SFML event
	void updateInput(float t); //!< Calls update in the Input singleton class. Call straight after event poll
	void update(float t); //!< Update all sub systems here!
	void render();
	void render(Camera* camera); //!< Render through a given camera. Only used by editor to render through special editor camera
	void resetInput(); //!< Must be called at end of frame to reset key states
	void shutDown(); //!< Anything that needs to be stopped elegantly or in certain order, put here

	
	SceneManager* getSceneManager(); //!< The editor requires a reference to this and can use this getter to obtain it

private:
	// Core Engine
	sf::RenderWindow _window;
	SceneManager _sceneMngr;
	ObjectManager* _objMngr;
	Input* _input;
	
	// Sub Systems
	RenderSystem _rendSys;
	BehaviourSystem _behvrSys;

	// Engine Vars
	sf::Vector2u _screenSize;

	// Time
	float _refreshRate;
	float _fixedTime; //!< Fixed delta time
};



#endif